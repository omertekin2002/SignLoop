OpenAI Codex v0.87.0 (research preview)
--------
workdir: /Users/omertekin/Desktop/Grind/SignLoop
model: gpt-5.2-codex
provider: openai
approval: never
sandbox: danger-full-access
reasoning effort: xhigh
reasoning summaries: auto
session id: 019bcc87-e567-7e22-9b62-5f3195378750
--------
user
# Build

You are an autonomous coding agent. Your task is to complete the work for exactly one story and record the outcome.

## Paths
- PRD: /Users/omertekin/Desktop/Grind/SignLoop/.agents/tasks/prd-contract-analysis.json
- AGENTS (optional): /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md
- Progress Log: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/progress.md
- Guardrails: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/guardrails.md
- Guardrails Reference: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph/references/GUARDRAILS.md
- Context Reference: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph/references/CONTEXT_ENGINEERING.md
- Errors Log: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/errors.log
- Activity Log: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/activity.log
- Activity Logger: /Users/omertekin/Desktop/Grind/SignLoop/ralph log
- No-commit: false
- Repo Root: /Users/omertekin/Desktop/Grind/SignLoop
- Run ID: 20260117-181656-16962
- Iteration: 1
- Run Log: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/runs/run-20260117-181656-16962-iter-1.log
- Run Summary: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/runs/run-20260117-181656-16962-iter-1.md

## Global Quality Gates (apply to every story)
- npm run build

## Selected Story (Do not change scope)
ID: US-001
Title: Harden contract detail route against blank-screen failures

Story details:
### US-001: Harden contract detail route against blank-screen failures
Status: in_progress
Depends on: None

Description:
As a user, I want the contract detail page to always render a meaningful state so that I never encounter a blank screen when opening analyzed contracts.

Acceptance Criteria:
- [ ] Add route-level error handling for /contracts/[id] to surface a friendly error view with a Back to Dashboard action
- [ ] Guard all date formatting and nested analysis access so missing/invalid fields do not throw
- [ ] Show explicit empty state guidance when analysis is absent or incomplete
- [ ] Example: a contract with no analysis renders the empty state with a clear call to action
- [ ] Negative case: /contracts/:id API returns 404 or 500 -> error state renders and the page does not blank


If the story details are empty or missing, STOP and report that the PRD story format could not be parsed.

## Rules (Non-Negotiable)
- Implement **only** the work required to complete the selected story.
- Complete all tasks associated with this story (and only this story).
- Do NOT ask the user questions.
- Do NOT change unrelated code.
- Do NOT assume something is unimplemented — confirm by reading code.
- Implement completely; no placeholders or stubs.
- If No-commit is true, do NOT commit or push changes.
- Do NOT edit the PRD JSON (status is handled by the loop).
- All changes made during the run must be committed (including updates to progress/logs).
 - Before committing, perform a final **security**, **performance**, and **regression** review of your changes.

## Your Task (Do this in order)
1. Read /Users/omertekin/Desktop/Grind/SignLoop/.ralph/guardrails.md before any code changes.
2. Read /Users/omertekin/Desktop/Grind/SignLoop/.ralph/errors.log for repeated failures to avoid.
3. Read /Users/omertekin/Desktop/Grind/SignLoop/.agents/tasks/prd-contract-analysis.json for global context (do not edit).
4. Fully audit and read all necessary files to understand the task end-to-end before implementing. Do not assume missing functionality.
5. If /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md exists, follow its build/test instructions.
6. Implement only the tasks that belong to US-001.
7. Run verification commands listed in the story, the global quality gates, and in /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md (if required).
8. If the project has a build or dev workflow, run what applies:
   - Build step (e.g., `npm run build`) if defined.
   - Dev server (e.g., `npm run dev`, `wrangler dev`) if it is the normal validation path.
   - Confirm no runtime/build errors in the console.
9. Perform a brief audit before committing:
   - **Security:** check for obvious vulnerabilities or unsafe handling introduced by your changes.
   - **Performance:** check for avoidable regressions (extra queries, heavy loops, unnecessary re-renders).
   - **Regression:** verify existing behavior that could be impacted still works.
10. If No-commit is false, commit changes using the `$commit` skill.
    - Stage everything: `git add -A`
    - Confirm a clean working tree after commit: `git status --porcelain` should be empty.
    - After committing, capture the commit hash and subject using:
      `git show -s --format="%h %s" HEAD`.
11. Append a progress entry to /Users/omertekin/Desktop/Grind/SignLoop/.ralph/progress.md with run/commit/test details (format below).
    If No-commit is true, skip committing and note it in the progress entry.

## Progress Entry Format (Append Only)
```
## [Date/Time] - US-001: Harden contract detail route against blank-screen failures
Thread: [codex exec session id if available, otherwise leave blank]
Run: 20260117-181656-16962 (iteration 1)
Run log: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/runs/run-20260117-181656-16962-iter-1.log
Run summary: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/runs/run-20260117-181656-16962-iter-1.md
- Guardrails reviewed: yes
- No-commit run: false
- Commit: <hash> <subject> (or `none` + reason)
- Post-commit status: `clean` or list remaining files
- Verification:
  - Command: <exact command> -> PASS/FAIL
  - Command: <exact command> -> PASS/FAIL
- Files changed:
  - <file path>
  - <file path>
- What was implemented
- **Learnings for future iterations:**
  - Patterns discovered
  - Gotchas encountered
  - Useful context
---
```

## Completion Signal
Only output the completion signal when the **selected story** is fully complete and verified.
When the selected story is complete, output:
<promise>COMPLETE</promise>

Otherwise, end normally without the signal.

## Additional Guardrails
- When authoring documentation, capture the why (tests + implementation intent).
- If you learn how to run/build/test the project, update /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md briefly (operational only).
- Keep AGENTS operational only; progress notes belong in /Users/omertekin/Desktop/Grind/SignLoop/.ralph/progress.md.
- If you hit repeated errors, log them in /Users/omertekin/Desktop/Grind/SignLoop/.ralph/errors.log and add a Sign to /Users/omertekin/Desktop/Grind/SignLoop/.ralph/guardrails.md using /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph/references/GUARDRAILS.md as the template.

## Activity Logging (Required)
Log major actions to /Users/omertekin/Desktop/Grind/SignLoop/.ralph/activity.log using the helper:
```
/Users/omertekin/Desktop/Grind/SignLoop/ralph log "message"
```
Log at least:
- Start of work on the story
- After major code changes
- After tests/verification
- After updating progress log

## Browser Testing (Required for Frontend Stories)
If the selected story changes UI, you MUST verify it in the browser:
1. Load the `dev-browser` skill.
2. Navigate to the relevant page.
3. Verify the UI changes work as expected.
4. Take a screenshot if helpful for the progress log.

A frontend story is NOT complete until browser verification passes.

mcp startup: no servers

thinking
**Setting up initial workflow**

Planning to begin by executing commands with the exec tool, focusing on reading guardrails, error logs, PRD, and agent logs, while preparing to use browser for UI interactions and commit skill for commits.
exec
/bin/zsh -lc ls in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
GEMINI.md
README.md
apps
node_modules
package-lock.json
package.json
packages
turbo.json
vercel.json

thinking
**Preparing to read guardrails**
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/.ralph/guardrails.md' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
# Guardrails (Signs)

> Lessons learned from failures. Read before acting.

## Core Signs

### Sign: Read Before Writing
- **Trigger**: Before modifying any file
- **Instruction**: Read the file first
- **Added after**: Core principle

### Sign: Test Before Commit
- **Trigger**: Before committing changes
- **Instruction**: Run required tests and verify outputs
- **Added after**: Core principle

---

## Learned Signs


thinking
**Reviewing errors log**
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/.ralph/errors.log' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
# Error Log

> Failures and repeated issues. Use this to add guardrails.


thinking
**Reading PRD JSON**
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/.agents/tasks/prd-contract-analysis.json' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
{
  "version": 1,
  "project": "Contract Analysis Detail Page Fix",
  "overview": "Fix the blank sepia screen when opening an analyzed contract from the Contracts tab and ensure the analysis detail view reliably renders the required sections with clear empty/error states.",
  "goals": [
    "Prevent blank-screen failures on the contract detail page for analyzed contracts",
    "Render analysis summary and sections (Summary, Key Risks, Obligations, Dates, Parties) with resilient fallbacks",
    "Provide guidance when analysis data is missing or unavailable"
  ],
  "nonGoals": [
    "Redesigning the dashboard or Contracts tab layout",
    "Changing the contract upload or analysis trigger workflows",
    "Introducing a new persistence layer or database migrations"
  ],
  "successMetrics": [
    "Clicking any analyzed contract card loads the detail page without a blank screen",
    "All required analysis sections display a populated view or an explicit empty state",
    "No unhandled runtime errors when analysis fields are missing or malformed"
  ],
  "openQuestions": [

thinking
**Checking AGENTS instructions file**
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md' in /Users/omertekin/Desktop/Grind/SignLoop exited 1 in 51ms:
cat: /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md: No such file or directory

thinking
**Logging activity start**

I'm logging the start of the activity since the AGENTS are missing.
exec
/bin/zsh -lc '/Users/omertekin/Desktop/Grind/SignLoop/ralph log "Start US-001: harden contract detail route"' in /Users/omertekin/Desktop/Grind/SignLoop exited 127 in 52ms:
zsh:1: no such file or directory: /Users/omertekin/Desktop/Grind/SignLoop/ralph

thinking
**Checking for command script presence**

I'm listing all files, including hidden ones, in the repo to find any scripts related to the failed command.
exec
/bin/zsh -lc 'ls -a /Users/omertekin/Desktop/Grind/SignLoop' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
.
..
.DS_Store
.agents
.env.local
.gemini
.git
.gitattributes
.gitignore
.npmrc
.ralph
.turbo
.vercel
GEMINI.md
README.md
apps
node_modules
package-lock.json
package.json
packages

thinking
**Investigating presence of logging helper**

I'm checking if the logging helper script named 'ralph' exists in the repo or node_modules to ensure major actions can be logged as required, planning to search for it with a filename filter.
exec
/bin/zsh -lc "rg --files -g 'ralph' /Users/omertekin/Desktop/Grind/SignLoop" in /Users/omertekin/Desktop/Grind/SignLoop exited 1 in 52ms:


thinking
**Checking for script presence**

I'm listing the hidden directory to see if it contains any scripts that could be relevant, since the initial search returned nothing.
exec
/bin/zsh -lc 'ls /Users/omertekin/Desktop/Grind/SignLoop/.ralph' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
activity.log
errors.log
guardrails.md
progress.md
runs

thinking
**Checking for ralph binary in PATH**
exec
/bin/zsh -lc 'which ralph' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
/opt/homebrew/bin/ralph


thinking
**Deciding to use ralph from PATH despite instruction**

The helper binary at the exact repo path doesn't exist, so I'll use the `ralph` command from PATH instead while noting the fallback; repeated errors logging is unnecessary since the missing file error is one-time.
thinking
**Confirming running ralph log from PATH**

I'll proceed to run the `ralph log` command from PATH and consider noting this decision in the activity log.
exec
/bin/zsh -lc 'ralph log "Start US-001: harden contract detail route"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
Using local templates: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph

thinking
**Locating contract detail route**
exec
/bin/zsh -lc "rg --files -g 'page.tsx' -g 'page.jsx' -g 'page.ts' -g 'page.js' apps packages" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
apps/docs/app/page.tsx
apps/web/app/page.tsx
apps/web/app/dashboard/page.tsx
apps/web/app/sign-in/[[...sign-in]]/page.tsx
apps/web/app/contracts/[id]/page.tsx
apps/web/app/sign-up/[[...sign-up]]/page.tsx

thinking
**Planning contract detail page**
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx' in /Users/omertekin/Desktop/Grind/SignLoop exited 1 in 51ms:
zsh:1: no matches found: /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx

thinking
**Fixing escape bracket with quotes**
exec
/bin/zsh -lc "cat '/Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx'" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
'use client';

import { useEffect, useState } from "react";
import { useParams, useRouter } from "next/navigation";
import Link from "next/link";
import { useQuery, useMutation, useQueryClient } from "@tanstack/react-query";
import { apiClient } from "@/lib/api-client";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "@/components/ui/card";
import { Skeleton } from "@/components/ui/skeleton";
import {
    AlertDialog,
    AlertDialogAction,
    AlertDialogCancel,
    AlertDialogContent,
    AlertDialogDescription,
    AlertDialogFooter,
    AlertDialogHeader,
    AlertDialogTitle,


thinking
**Planning robust error and data guards**

I'm ensuring route-level error handling for the client at /contracts/[id], adding error states for query failures with a fallback UI. I'll implement safe date formatting to prevent throws on invalid dates and strengthen checks around nested analysis data to avoid runtime errors from unexpected or malformed summary fields.
thinking
**Defining comprehensive error and data safety handling**

I'm clarifying that route-level error handling will use an `error.tsx` boundary for unexpected errors, combined with in-page error states for `useQuery` API errors like 404/500. I'll enhance empty state messaging for incomplete or missing analysis data and implement safe date formatting helpers to avoid crashes. Next, I'll review related files to identify further data shape assumptions needing guards.
exec
/bin/zsh -lc "rg -n \"latestAnalysis|analyses|contract\" /Users/omertekin/Desktop/Grind/SignLoop/apps/web -g '*.ts' -g '*.tsx'" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:6:  text?: string; // Content of the contract
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:7:  analyses?: any[];
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:8:  latestAnalysis?: any;
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:12:const globalForStore = global as unknown as { contracts: Contract[] };
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:14:if (!globalForStore.contracts) {
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:15:  globalForStore.contracts = [];
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/store.ts:19:  contracts: globalForStore.contracts,
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/contract-db.ts:36:    insert into contract_files (
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/contract-db.ts:68:    throw new Error('Insert failed to return a contract row.');
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/contract-db.ts:89:    from contract_files
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/analysis.ts:62:        You are an expert legal contract analyst. Analyze the following contract text and provide a risk assessment and summary.
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/analysis.ts:65:        Type: ${metadata?.contractType || 'Unknown'}
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/new-project-dialog.tsx:82:                            Projects allow you to analyze contracts with legal context.
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/new-project-dialog.tsx:83:                            Upload governing laws, prior contracts, or other reference documents
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/upload-dialog.tsx:26:    const [contractName, setContractName] = useState("");
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/upload-dialog.tsx:35:            // Default contract name to filename without extension
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/upload-dialog.tsx:41:        if (!file || !contractName) return;
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/upload-dialog.tsx:46:            const createRes = await apiClient.post("/contracts", {
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/upload-dialog.tsx:47:                title: contractName,
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/components/upload-dialog.tsx:49:            const contractId = createRes.data.id;

thinking
**Inspecting analysis API shape**

I'm checking the analyze API route to understand the shape of the analysis result, likely in an `analysisRecord`, to guide how to handle and display this data.
exec
/bin/zsh -lc "cat '/Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/api/contracts/[id]/analyze/route.ts'" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
import { NextResponse } from 'next/server';
import { db } from '@/lib/store';
import { analyzeText } from '@/lib/analysis';

export async function POST(req: Request, { params }: { params: Promise<{ id: string }> }) {
  const { id } = await params;
  const contract = db.contracts.find((c) => c.id === id);
  
  if (!contract) {
    return NextResponse.json({ error: 'Contract not found' }, { status: 404 });
  }

  if (!contract.text) {
    return NextResponse.json({ error: 'Contract has no text content. Upload a file first.' }, { status: 400 });
  }

  try {
    // Synchronous analysis for prototype
    const { result, model } = await analyzeText(contract.text);
    

thinking
**Identifying analysis result structure**

Learned the analysis result shape includes fields like risk_badge and others; I'll review the analysis library to understand the full summary structure.
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/analysis.ts' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
import OpenAI from 'openai';
import { AnalysisResultSchema, PartialAnalysisResultSchema, AnalysisResult } from '@/lib/schemas';

const OPENROUTER_API_KEY = process.env.OPENROUTER_API_KEY;
const OPENROUTER_BASE_URL = process.env.OPENROUTER_BASE_URL || 'https://openrouter.ai/api/v1';
const SITE_URL = process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';
const APP_NAME = 'SignLoop';

function parseStrictJson<T>(content: string): T {
    const trimmed = content.trim();
    let parsed: unknown;

    try {
        parsed = JSON.parse(trimmed);
    } catch {
        const withoutFences = trimmed
            .replace(/^```(?:json)?\s*/i, '')
            .replace(/\s*```$/i, '')
            .trim();
        try {

thinking
**Planning schema inspection**
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/schemas.ts' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
import { z } from 'zod';

export const AnalysisResultSchema = z.object({
    risk_badge: z.enum(['LOW', 'MEDIUM', 'HIGH']),

    key_points: z.array(z.string()),

    summary: z.object({
        what_it_is: z.string(),
        payments: z.object({
            amount: z.string().nullable(),
            frequency: z.string().nullable(),
            fees: z.array(z.string()),
        }),
        term: z.object({
            start: z.string().nullable(),
            end: z.string().nullable(),
            minimum_term: z.string().nullable(),
        }),
        renewal: z.object({


thinking
**Planning robust error and UI handling**

I’m preparing to implement safe nested data access in the UI for analysis results that may be incomplete, plus a route-level error boundary for contract pages using Next.js patterns. The error UI will be a client component with a friendly message and a consistent Button/Link combo, also considering fallback states for missing or malformed data.
thinking
**Detailing data guarding and error states**

The data shape mismatches cause blank or minimal UI, so I’ll strengthen nested access guards with type checks and defaults to avoid crashes or empty screens. I’ll also improve route-level error handling for missing contracts and API errors, ensuring user-friendly messages and fallback UI with back navigation.
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/apps/web/lib/api-client.ts' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
import axios from 'axios';

export const apiClient = axios.create({
  baseURL: '/api',
  headers: {
    'Content-Type': 'application/json',
  },
});


thinking
**Confirming patch scope and build step**

I'll focus only on the contract detail route and add the error boundary file without touching unrelated code, then run the build step to validate.
thinking
**Designing robust error handling and safe rendering**

I'm defining a route-level error boundary file with a friendly UI and Back to Dashboard button and enhancing the contract detail page to safely handle API errors, missing or invalid dates, and empty analysis data with clear fallback states. This includes adjusting error parsing, safe date formatting, and improving key findings access while avoiding unrelated changes.
exec
/bin/zsh -lc "rg -n \"Empty\" /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app -g '*.tsx'" in /Users/omertekin/Desktop/Grind/SignLoop exited 1 in 52ms:





thinking
**Planning query error and date helpers**

I'm preparing to extend the query hook with error handling and add resilient date formatting helpers to the contracts page, ensuring no new dependencies and safe date conversions without relying on try/catch.
thinking
**Refining safe data access and error handling**

I'm planning robust guards for nested contract analysis data to prevent runtime errors, updating risk badge handling to ensure string safety, and designing a clear error state UI reusing existing imports and components without adding dependencies.
thinking
**Designing robust UI states with helpers**

I'm planning helper functions for safe date handling, error details extraction, and rendering consistent issue states, plus explicit empty states for missing analysis data to improve user guidance without altering imports or adding dependencies.
thinking
**Finalizing safe data handling and error states**

I've detailed robust derived data extraction with type guards, comprehensive error state rendering using extracted error info and reusable UI helpers, and consistent use of fallback labeling and formatting to ensure a resilient and user-friendly contract page experience.
file update
M /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx
@@ -34,3 +34,68 @@
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
@@ -86,4 +151,5 @@
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
@@ -95,3 +161,5 @@
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
@@ -99,3 +167,3 @@
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
@@ -106,2 +174,48 @@
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
@@ -183,3 +297,13 @@
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
+
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
 
@@ -197,5 +321,5 @@
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
@@ -265,7 +389,7 @@
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
@@ -286,5 +410,5 @@
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
@@ -297,3 +421,3 @@
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
@@ -305,12 +429,12 @@
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
@@ -319,3 +443,3 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
@@ -328,7 +452,7 @@
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
@@ -343,3 +467,3 @@
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
@@ -352,8 +476,6 @@
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
@@ -362,5 +484,9 @@
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
apply_patch(auto_approved=true) exited 0 in 21ms:
Success. Updated the following files:
M /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx
file update:
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..0b9d62f519591a562413b0f378375443defda7e7
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,65 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,7 +295,17 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
+
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
 
     return (
         <div className="min-h-screen bg-background pb-12">
@@ -195,9 +319,9 @@
                         <div>
                             <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +387,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +408,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +419,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +427,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +450,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +465,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +474,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

file update:
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..0b9d62f519591a562413b0f378375443defda7e7
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,65 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,7 +295,17 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
+
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
 
     return (
         <div className="min-h-screen bg-background pb-12">
@@ -195,9 +319,9 @@
                         <div>
                             <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +387,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +408,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +419,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +427,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +450,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +465,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +474,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Considering fallback for contract title**

I'm evaluating whether to add a fallback for `contract.title` to avoid empty UI, though it's not critical since no crash occurs. Also verifying date formatting handles invalid dates safely and noting some introduced analysis variables and mutations remain unused but preexisting.
thinking
**Verifying data usage and planning error UI**

All newly added summary and analysis variables are used appropriately with safe type checks and fallbacks. Preparing to add a comprehensive error component that logs errors and offers retry and dashboard navigation, aligning with guidance to show clear error states.
file update
A /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/error.tsx
'use client';

import { useEffect } from "react";
import Link from "next/link";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { ArrowLeft, XCircle } from "lucide-react";

export default function Error({
    error,
    reset,
}: {
    error: Error & { digest?: string };
    reset: () => void;
}) {
    useEffect(() => {
        console.error(error);
    }, [error]);

    return (
        <div className="min-h-screen bg-background">
            <div className="container mx-auto px-4 py-12">
                <Card className="max-w-xl mx-auto">
                    <CardContent className="flex flex-col items-center text-center py-10">
                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
                            <XCircle className="h-8 w-8 text-destructive" />
                        </div>
                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
                        <p className="text-sm text-muted-foreground mt-2">
                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
                        </p>
                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
                            <Button variant="outline" onClick={() => reset()}>
                                Try Again
                            </Button>
                            <Button asChild>
                                <Link href="/dashboard">
                                    <ArrowLeft className="mr-2 h-4 w-4" />
                                    Back to Dashboard
                                </Link>
                            </Button>
                        </div>
                    </CardContent>
                </Card>
            </div>
        </div>
    );
}
apply_patch(auto_approved=true) exited 0 in 45ms:
Success. Updated the following files:
A /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/error.tsx
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..0b9d62f519591a562413b0f378375443defda7e7
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,65 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,7 +295,17 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
+
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
 
     return (
         <div className="min-h-screen bg-background pb-12">
@@ -195,9 +319,9 @@
                         <div>
                             <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +387,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +408,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +419,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +427,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +450,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +465,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +474,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..0b9d62f519591a562413b0f378375443defda7e7
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,65 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,7 +295,17 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
+
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
 
     return (
         <div className="min-h-screen bg-background pb-12">
@@ -195,9 +319,9 @@
                         <div>
                             <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +387,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +408,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +419,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +427,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +450,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +465,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +474,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Adding fallback for contract title**

I'm adding a safe fallback string "Untitled contract" for the contract title to avoid displaying a blank title if missing, computing it alongside other derived values like status.
thinking
**Integrating contract title fallback**

I'm placing the contract title fallback after related labels and updating the header render to use this new `contractTitle` value.
file update
M /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx
@@ -219,2 +219,5 @@
         : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
 
@@ -319,3 +322,3 @@
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
apply_patch(auto_approved=true) exited 0 in 37ms:
Success. Updated the following files:
M /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/contracts/[id]/page.tsx
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Verifying icon usage and build readiness**

XCircle is now used in both the page and error files, while other imported icons remain unused but previously tolerated; I'll keep them to avoid unnecessary churn since unused imports didn't fail before. Next, I'll run a build and update the activity log with the recent major changes.
exec
/bin/zsh -lc 'ralph log "Updated contract detail route with error/empty state handling"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
Using local templates: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Checking build and test commands**

I'm examining package.json to confirm the build and test scripts, aiming to update AGENTS.md with accurate operational commands.
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/package.json' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
{
  "name": "my-turbo",
  "private": true,
  "scripts": {
    "build": "turbo run build",
    "dev": "turbo run dev",
    "lint": "turbo run lint",
    "format": "prettier --write \"**/*.{ts,tsx,md}\"",
    "check-types": "turbo run check-types",
    "db:migrate": "npm --workspace apps/web run db:migrate"
  },
  "devDependencies": {
    "prettier": "^3.7.4",
    "turbo": "^2.7.4",
    "typescript": "5.9.2"
  },
  "engines": {
    "node": ">=18"
  },
  "packageManager": "npm@11.7.0",
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Creating initial AGENTS.md with build instructions**

I'm preparing to create AGENTS.md containing minimal operational build, dev, lint, and type check commands along with a brief rationale for the build step to meet documentation instructions.
exec
/bin/zsh -lc "cat <<'EOF' > /Users/omertekin/Desktop/Grind/SignLoop/AGENTS.md
# AGENTS

## Build and Validation
- Build: "'`npm run build` from repo root to validate all workspaces compile.
- Dev server: `npm run dev` from repo root to run the apps locally.
- Lint: `npm run lint` from repo root to run workspace linting.
- Type check: `npm run check-types` from repo root to verify TypeScript types.
EOF' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Running build before dev server**

I'm choosing to run the build now as a quality gate step before later starting the dev server and automating browser testing.
exec
/bin/zsh -lc 'npm run build' in /Users/omertekin/Desktop/Grind/SignLoopfile update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for build completion**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

 succeeded in 8.43s:

> build
> turbo run build

• turbo 2.7.4
• Packages in scope: @repo/eslint-config, @repo/typescript-config, @repo/ui, docs, web
• Running build in 5 packages
• Remote caching disabled
web:build: cache miss, executing 30c75291c1f161cf
docs:build: cache hit, replaying logs fbe6f38c57d8989c
docs:build: 
docs:build: > docs@0.1.0 build
docs:build: > next build
docs:build: 
docs:build: ⚠ Warning: Next.js inferred your workspace root, but it may not be correct.
docs:build:  We detected multiple lockfiles and selected the directory of /Users/omertekin/package-lock.json as the root directory.
docs:build:  To silence this warning, set `turbopack.root` in your Next.js config, or consider removing one of the lockfiles if it's not needed.
docs:build:    See https://nextjs.org/docs/app/api-reference/config/next-config-js/turbopack#root-directory for more information.
docs:build:  Detected additional lockfiles: 
docs:build:    * /Users/omertekin/Desktop/Grind/SignLoop/package-lock.json

thinking
**Checking if build process ended**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Planning post-test logging**

I'm preparing to add a command that logs the build activity after tests complete to track the `npm run build` step.
exec
/bin/zsh -lc 'ralph log "Ran npm run build"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
Using local templates: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Preparing for browser testing**
exec
/bin/zsh -lc 'cat /Users/omertekin/.codex/skills/dev-browser/SKILL.md' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
---
name: dev-browser
description: Browser automation with persistent page state. Use when users ask to navigate websites, fill forms, take screenshots, extract web data, test web apps, or automate browser workflows. Trigger phrases include "go to [url]", "click on", "fill out the form", "take a screenshot", "scrape", "automate", "test the website", "log into", or any browser interaction request.
---

# Dev Browser Skill

Browser automation that maintains page state across script executions. Write small, focused scripts to accomplish tasks incrementally. Once you've proven out part of a workflow and there is repeated work to be done, you can write a script to do the repeated work in a single execution.

## Choosing Your Approach

- **Local/source-available sites**: Read the source code first to write selectors directly
- **Unknown page layouts**: Use `getAISnapshot()` to discover elements and `selectSnapshotRef()` to interact with them
- **Visual feedback**: Take screenshots to see what the user sees

## Setup

Two modes available. Ask the user if unclear which to use.

### Standalone Mode (Default)
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Starting dev-browser server**

Planning to run the dev-browser server script in the background from the skills/dev-browser directory per instructions.
exec
/bin/zsh -lc 'cd /Users/omertekin/.codex/skills/dev-browser && ./server.sh &' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Planning dev server startup and readiness check**

I'm planning to run the dev server in the background using `npm run dev` and then repeatedly attempt to connect to confirm readiness before using the dev-browser to load the local page. I'll consider starting the server with a tty or in a separate session to keep it alive during testing.
thinking
**Starting dev server in persistent tty session**

I'm preparing to run `npm run dev` using an exec command with a tty to keep the session alive without yielding output, allowing the server to run continuously while the browser runs. I'll retain the session ID to stop the server later by sending Ctrl-C.
exec
/bin/zsh -lc 'npm run dev' in /Users/omertekin/Desktop/Grind/SignLoopfile update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for dev server readiness**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Planning contract test data setup**

Dev server is ready; next is testing UI by opening contract detail pages. To get a contract ID, I'll likely create one via API for efficiency but may use the UI upload flow for alignment. I'll test normal, empty, and error states by combining API setup and browser navigation.
thinking
**Confirming API contract creation approach**

I'll verify the API contract creation endpoint and required fields to quickly set up test data via API, then open the contract detail page in the dev-browser for UI testing. This balances simplicity and thoroughness without relying on complex UI upload flows.
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/api/contracts/route.ts' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
import { NextResponse } from 'next/server';
import { db } from '@/lib/store';

export async function GET() {
  return NextResponse.json(db.contracts.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()));
}

export async function POST(req: Request) {
  const body = await req.json();
  const newContract = {
    id: crypto.randomUUID(),
    title: body.title || 'Untitled Contract',
    status: 'DRAFT' as const,
    createdAt: new Date().toISOString(),
    analyses: [],
  };
  db.contracts.push(newContract);
  return NextResponse.json(newContract);
}
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Testing contract creation endpoint**

Planning to create a test contract via POST to the API using curl to verify empty or error analysis states, since generating real analysis isn't feasible without an API key. I'll create a simple contract with no analysis for initial UI tests.
exec
/bin/zsh -lc "curl -s -X POST http://localhost:3000/api/contracts -H 'Content-Type: application/json' -d '{\"title\":\"Empty Analysis Contract\"}'" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 159ms:
{"id":"70325701-c269-4275-a99b-a5ef0ab8abdf","title":"Empty Analysis Contract","status":"DRAFT","createdAt":"2026-01-17T15:25:50.913Z","analyses":[]}
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Planning dev-browser script for contract page**

I'm preparing to create a dev-browser script that opens the contract page by ID, waits for load, and verifies the presence of "No Analysis Yet" to confirm empty state, considering how to handle checking a nonexistent ID within the same or separate script.
thinking
**Drafting contract page test script**

I'm creating a dev-browser script using Playwright-style selectors to open the contract page by ID, verify key empty-state elements like "No Analysis Yet" text and buttons, and capture a screenshot for validation. I'll run it next to confirm functionality.
exec
/bin/zsh -lc "cd /Users/omertekin/.codex/skills/dev-browser && npx tsx <<'EOF'
import { connect, waitForPageLoad } from \"@/client.js\";

const contractId = \"70325701-c269-4275-a99b-a5ef0ab8abdf\";

const client = await connect();
const page = await client.page(\"contract-detail\", { viewport: { width: 1280, height: 720 } });

await page.goto("'`http://localhost:3000/contracts/${contractId}`);
await waitForPageLoad(page);

const emptyState = await page.getByText("No Analysis Yet").first().isVisible();
const ctaVisible = await page.getByRole("button", { name: "Start Analysis" }).isVisible();
const headerVisible = await page.getByRole("heading", { name: "Empty Analysis Contract" }).isVisible();

console.log({ emptyState, ctaVisible, headerVisible });

await page.screenshot({ path: "tmp/contract-empty-state.png", fullPage: true });
await client.disconnect();
EOF' in /Users/omertekin/Desktop/Grind/SignLoop exited 1 in 3.49s:
npm warn exec The following package was not found and will be installed: tsx@4.21.0

node:internal/modules/run_main:107
    triggerUncaughtException(
    ^
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'playwright' imported from /Users/omertekin/.codex/skills/dev-browser/src/client.ts
    at Object.getPackageJSONURL (node:internal/modules/package_json_reader:316:9)
    at packageResolve (node:internal/modules/esm/resolve:768:81)
    at moduleResolve (node:internal/modules/esm/resolve:858:18)
    at defaultResolve (node:internal/modules/esm/resolve:990:11)
    at nextResolve (node:internal/modules/esm/hooks:769:28)
    at resolveBase (file:///Users/omertekin/.npm/_npx/fd45a72a545557e9/node_modules/tsx/dist/esm/index.mjs?1768663566655:2:3744)
    at resolveDirectory (file:///Users/omertekin/.npm/_npx/fd45a72a545557e9/node_modules/tsx/dist/esm/index.mjs?1768663566655:2:4243)
    at resolveTsPaths (file:///Users/omertekin/.npm/_npx/fd45a72a545557e9/node_modules/tsx/dist/esm/index.mjs?1768663566655:2:4984)
    at async resolve (file:///Users/omertekin/.npm/_npx/fd45a72a545557e9/node_modules/tsx/dist/esm/index.mjs?1768663566655:2:5355)
    at async nextResolve (node:internal/modules/esm/hooks:769:22) {
  code: 'ERR_MODULE_NOT_FOUND'
}

Node.js v25.2.1
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Installing missing dependencies in skill**

The dev-browser skill lacks required packages, so I'll run npm install inside its directory to resolve the missing Playwright dependency without modifying the main repo.
exec
/bin/zsh -lc 'cd /Users/omertekin/.codex/skills/dev-browser && npm install' in /Users/omertekin/Desktop/Grind/SignLoopfile update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

 succeeded in 3.41s:

added 139 packages, and audited 140 packages in 3s

29 packages are looking for funding
  run `npm fund` for details

7 vulnerabilities (5 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.

thinking
**Verifying and rerunning dev-browser script**

Planning to rerun the dev-browser script and check if the server from server.sh is still running; if connection fails, the server will be started again before rerunning the script.
exec
/bin/zsh -lc "cd /Users/omertekin/.codex/skills/dev-browser && npx tsx <<'EOF'
import { connect, waitForPageLoad } from \"@/client.js\";

const contractId = \"70325701-c269-4275-a99b-a5ef0ab8abdf\";

const client = await connect();
const page = await client.page(\"contract-detail\", { viewport: { width: 1280, height: 720 } });

await page.goto("'`http://localhost:3000/contracts/${contractId}`);
await waitForPageLoad(page);

const emptyState = await page.getByText("No Analysis Yet").first().isVisible();
const ctaVisible = await page.getByRole("button", { name: "Start Analysis" }).isVisible();
const headerVisible = await page.getByRole("heading", { name: "Empty Analysis Contract" }).isVisible();

console.log({ emptyState, ctaVisible, headerVisible });

await page.screenshot({ path: "tmp/contract-empty-state.png", fullPage: true });
await client.disconnect();
EOF' in /Users/omertekin/Desktop/Grind/SignLoop exited 1 in 1.12s:
node:internal/deps/undici/undici:15845
      Error.captureStackTrace(err);
            ^

TypeError: fetch failed
    at node:internal/deps/undici/undici:15845:13
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async Object.getPage (/Users/omertekin/.codex/skills/dev-browser/src/client.ts:319:17)
    at async file:///Users/omertekin/.codex/skills/dev-browser/[eval1]:6:14 {
  [cause]: AggregateError [ECONNREFUSED]: 
      at internalConnectMultiple (node:net:1134:18)
      at afterConnectMultiple (node:net:1715:7) {
    code: 'ECONNREFUSED',
    [errors]: [
      Error: connect ECONNREFUSED ::1:9222
          at createConnectionError (node:net:1678:14)
          at afterConnectMultiple (node:net:1708:16) {
        errno: -61,
        code: 'ECONNREFUSED',
        syscall: 'connect',
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Adjusting server start for readiness detection**

I'm planning to run the server in a separate terminal session or similar setup to keep its output visible and detect the "Ready" message before proceeding.
exec
/bin/zsh -lc 'cd /Users/omertekin/.codex/skills/dev-browser && ./server.sh' in /Users/omertekin/Desktop/Grind/SignLoopfile update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for Ready message**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for Playwright download completion**

I’m setting up a process to wait for the Playwright download to finish, watching for a "Ready" message and polling in intervals since the download might take some time.
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for server readiness**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for download completion**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for headless shell download completion**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for readiness signal**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Running script to test empty state**
exec
/bin/zsh -lc "cd /Users/omertekin/.codex/skills/dev-browser && npx tsx <<'EOF'
import { connect, waitForPageLoad } from \"@/client.js\";

const contractId = \"70325701-c269-4275-a99b-a5ef0ab8abdf\";

const client = await connect();
const page = await client.page(\"contract-detail\", { viewport: { width: 1280, height: 720 } });

await page.goto("'`http://localhost:3000/contracts/${contractId}`);
await waitForPageLoad(page);

const emptyState = await page.getByText("No Analysis Yet").first().isVisible();
const ctaVisible = await page.getByRole("button", { name: "Start Analysis" }).isVisible();
const headerVisible = await page.getByRole("heading", { name: "Empty Analysis Contract" }).isVisible();

console.log({ emptyState, ctaVisible, headerVisible });

await page.screenshot({ path: "tmp/contract-empty-state.png", fullPage: true });
await client.disconnect();
EOF' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 4.55s:
{ emptyState: false, ctaVisible: false, headerVisible: false }
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Preparing to view screenshot for empty state**
viewed image /Users/omertekin/.codex/skills/dev-browser/tmp/contract-empty-state.png
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Analyzing loading stuck on skeleton screen**

The loading skeleton persists likely because the query stays pending due to undefined route params on first render or an error preventing re-render; investigating if the dev-browser shows only static skeleton without fetching is next.
thinking
**Investigating API fetch, error handling, and loading states**

The API fetch might be stuck due to timing or environment issues with the in-memory database in dev; error states should render correctly on 404/500 with back navigation, and empty states appear for missing analysis. Next, I'll verify waiting for UI signals after loading and confirm error boundaries plus safe data guards prevent blank screens.
exec
/bin/zsh -lc "rg -n \"middleware\" /Users/omertekin/Desktop/Grind/SignLoop/apps/web -g '*.ts' -g '*.tsx'" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
/Users/omertekin/Desktop/Grind/SignLoop/apps/web/app/page.tsx:12:     // If signed in, redirect logic is handled by middleware usually, but here we can show a "Go to Dashboard"
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Analyzing potential contract null errors**

I noticed a possible unsafe access to `contract.latestAnalysis` when `contract` might be undefined, despite using optional chaining on the left side; this might cause runtime errors in helper computations before contract is fully loaded.
thinking
**Confirming safe access and investigating loading stall**

The contract access is safe due to short-circuiting in the condition, so no immediate runtime error there. Now I'm checking if the query's loading state is stuck—possibly due to the ID param shape or a network issue—and I'll inspect dev server logs to verify if requests to `/contracts` are handled properly.
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Adjusting test to wait for data load**

Planning to update the script to wait up to 10 seconds for the "Empty Analysis Contract" heading to appear before checking the UI, addressing the premature skeleton state capture.
exec
/bin/zsh -lc "cd /Users/omertekin/.codex/skills/dev-browser && npx tsx <<'EOF'
import { connect } from \"@/client.js\";

const contractId = \"70325701-c269-4275-a99b-a5ef0ab8abdf\";

const client = await connect();
const page = await client.page(\"contract-detail\", { viewport: { width: 1280, height: 720 } });

await page.goto("'`http://localhost:3000/contracts/${contractId}`);
await page.waitForLoadState("networkidle");

await page.waitForSelector("h1", { timeout: 10000 });

const headingText = await page.locator("h1").first().textContent();
const emptyState = await page.getByText("No Analysis Yet").first().isVisible();
const ctaVisible = await page.getByRole("button", { name: "Start Analysis" }).isVisible();

console.log({ headingText, emptyState, ctaVisible });

await page.screenshot({ path: "tmp/contract-empty-state.png", fullPage: true });
await client.disconnect();
EOF' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 1.94s:
{
  headingText: 'Empty Analysis Contract',
  emptyState: true,
  ctaVisible: true
}
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Testing 404 error state**

I'm preparing to verify that visiting a nonexistent contract URL triggers a 404 error state showing "Contract not found" with a Back to Dashboard button, reusing the dev-browser setup for the test.
exec
/bin/zsh -lc "cd /Users/omertekin/.codex/skills/dev-browser && npx tsx <<'EOF'
import { connect } from \"@/client.js\";

const client = await connect();
const page = await client.page(\"contract-error\", { viewport: { width: 1280, height: 720 } });

await page.goto(\"http://localhost:3000/contracts/does-not-exist\");
await page.waitForLoadState(\"networkidle\");

await page.waitForSelector(\"text=Contract not found\", { timeout: 10000 });
const backVisible = await page.getByRole(\"link\", { name: \"Back to Dashboard\" }).isVisible();

console.log({ backVisible });

await page.screenshot({ path: \"tmp/contract-error-state.png\", fullPage: true });
await client.disconnect();
EOF" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 8.22s:
{ backVisible: true }
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Planning post-test logging**

I'll log browser verification results and major actions using `ralph log` after tests, and track activity in the activity log while accepting route-level error boundary checks aren't straightforward.
exec
/bin/zsh -lc 'ralph log "Verified contract detail UI states in browser"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
Using local templates: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Stopping dev and dev-browser servers**

I'm preparing to clean up by sending Ctrl+C to the dev and dev-browser server sessions to avoid leaving stray processes running.
 exited 1 in 4m 15s:
╭──────────────────────────────────────────────────────────────────────────╮
│                                                                          │
│                     Update available v2.7.4 ≫ v2.7.5                     │
│    Changelog: https://github.com/vercel/turborepo/releases/tag/v2.7.5    │
│             Run "npx @turbo/codemod@latest update" to update             │
│                                                                          │
│          Follow [38;2;0;153;247m@[0m[38;2;88;145;235mt[0m[38;2;122;137;221mu[0m[38;2;147;127;206mr[0m[38;2;167;117;190mb[0m[38;2;185;106;172mo[0m[38;2;201;94;152mr[0m[38;2;215;78;126me[0m[38;2;229;58;92mp[0m[38;2;241;23;18mo[0m for updates: https://x.com/turborepo          │
╰──────────────────────────────────────────────────────────────────────────╯
• turbo 2.7.4
[2m• Packages in scope: @repo/eslint-config, @repo/typescript-config, @repo/ui, docs, web[0m
[2m• Running [0m[1m[2mdev[0m[2m in 5 packages
[0m[2m• Remote caching disabled[0m
[34mdocs:dev: [0mcache bypass, force executing [2mcf2bccff80c67c46[0m
[36mweb:dev: [0mcache bypass, force executing [2m20f0e40e6454c2d3[0m
[34mdocs:dev: [0m
[34mdocs:dev: [0m> docs@0.1.0 dev
[34mdocs:dev: [0m> next dev --port 3001
[34mdocs:dev: [0m
[36mweb:dev: [0m
[36mweb:dev: [0m> web@0.1.0 dev
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Stopping dev-browser server**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

 succeeded in 3m 09s:
⠙[1G[0K⠹[1G[0K⠸[1G[0K⠼[1G[0K⠴[1G[0K⠦[1G[0K⠧[1G[0K
up to date, audited 140 packages in 708ms
⠧[1G[0K
⠧[1G[0K29 packages are looking for funding
⠧[1G[0K  run `npm fund` for details
⠧[1G[0K
7 vulnerabilities (5 moderate, 2 high)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
⠧[1G[0KStarting dev-browser server...
Creating tmp directory...
Creating profiles directory...
Checking Playwright browser installation...
Playwright Chromium not found. Installing (this may take a minute)...

thinking
**Deciding on error logging**

Decided not to log the one-time missing dependency error since it wasn't repeated and was handled. Planning to verify git status to confirm expected changes before proceeding.
exec
/bin/zsh -lc 'git status --porcelain' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
 M .ralph/activity.log
 M apps/web/app/contracts/[id]/page.tsx
?? .agents/tasks/prd-contract-analysis.json
?? .ralph/.tmp/prd-prompt-20260117-180856-16302.md
?? .ralph/.tmp/prompt-20260117-181656-16962-1.md
?? .ralph/.tmp/story-20260117-180658-16134-1.json
?? .ralph/.tmp/story-20260117-180658-16134-1.md
?? .ralph/.tmp/story-20260117-180721-16186-1.json
?? .ralph/.tmp/story-20260117-180721-16186-1.md
?? .ralph/.tmp/story-20260117-181656-16962-1.json
?? .ralph/.tmp/story-20260117-181656-16962-1.md
?? .ralph/runs/run-20260117-181656-16962-iter-1.log
?? AGENTS.md
?? apps/web/app/contracts/[id]/error.tsx
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Checking commit status for run-generated files**

I'm verifying whether run-generated files like .ralph, .tmp, and task logs should be committed by inspecting .gitignore and instructions, since all changes during runs are required to be committed unless explicitly ignored.
exec
/bin/zsh -lc 'cat /Users/omertekin/Desktop/Grind/SignLoop/.gitignore' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# Dependencies
node_modules
.pnp
.pnp.js

# Local env files
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Testing
coverage

# Turbo
.turbo

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Assessing handling of untracked .ralph temp files**

The .ralph temp files are generated during runs and remain untracked; while instructions require committing all run-made changes, it’s unclear if these ephemeral system-created files must be committed or can be safely ignored or deleted.
thinking
**Deciding to commit all run-generated and environment files**

Untracked `.ralph/.tmp` files and `.agents/tasks/prd-contract-analysis.json` appear system-generated or environment-provided and likely need committing per instructions to capture all run changes. I’ll cautiously stage and commit all changes while confirming no unexpected manual edits were made.
exec
/bin/zsh -lc 'cat /Users/omertekin/.codex/skills/commit/SKILL.md' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
---
name: commit
description: Write conventional commit messages with type, scope, and subject when the user wants to commit changes or save work.
---

# Git Commit

Creates git commits following Conventional Commits format with proper type, scope, and subject.

## Quick Start

```bash
# 1. Stage changes
git add <files>  # or: git add -A

# 2. Create commit (branch commit format)
git commit -m "type(scope): subject

Body explaining HOW and WHY.
Reference: Task X.Y, Req N"
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Planning commit with proper message**

I'm preparing a concise commit message with a body due to moderate changes, ensuring the subject stays under 50 characters and considering a final security, performance, and regression review before committing. I'll also check for lint issues and unused imports in the modified TypeScript files.
thinking
**Reviewing imports and preparing for commit**

I confirmed that some previously unused icon imports remain unused but don't break builds, and verified new code uses all its imports properly. I ensured the error boundary file includes `'use client'`, validated formatting for changed files, and planned to include new and untracked files like the JSON task file and .ralph/.tmp directories in the commit. I'll also finalize documentation updates with appropriate "why" explanations and run a detailed `git diff` review before committing.
exec
/bin/zsh -lc 'git diff' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
diff --git a/.ralph/activity.log b/.ralph/activity.log
index c6459b8..ccf72ff 100644
--- a/.ralph/activity.log
+++ b/.ralph/activity.log
@@ -9,3 +9,8 @@
 [2026-01-17 17:55:34] Added contract DB helper, migration SQL, and scripts
 [2026-01-17 17:56:20] Ran npm test (failed: missing script) and npm run build
 [2026-01-17 18:01:45] Updated progress log for US-001
+[2026-01-17 18:16:56] ITERATION 1 start (mode=build story=US-001)
+[2026-01-17 18:17:28] Start US-001: harden contract detail route
+[2026-01-17 18:24:35] Updated contract detail route with error/empty state handling
+[2026-01-17 18:25:07] Ran npm run build
+[2026-01-17 18:29:33] Verified contract detail UI states in browser
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5f..c479b2d 100644
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@ const ContractDetails = () => {
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>




thinking
**Clarifying commit and progress log order**

The commit of code changes should happen first, then append the progress entry to the log as a new change that needs its own commit to ensure all updates are properly versioned.
thinking
**Resolving commit sequence with progress log update**

The best approach is to do two commits: first commit all code changes and logs updated so far; then append the progress log entry referencing the first commit's hash; finally, commit the progress log update separately to ensure all changes are committed while respecting step order.
thinking
**Planning staged commits and running lint/type checks**

The first commit will include code changes, logs, and untracked files staged together; then after commit, append and commit the progress log update separately. I'll also run `npm run lint` and `npm run check-types` now to satisfy the AGENTS.md instructions added during this run.
exec
/bin/zsh -lc 'npm run lint' in /Users/omertekin/Desktop/Grind/SignLoopfile update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Waiting for command completion**
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

 exited 1 in 4.02s:

> lint
> turbo run lint

• turbo 2.7.4
• Packages in scope: @repo/eslint-config, @repo/typescript-config, @repo/ui, docs, web
• Running lint in 5 packages
• Remote caching disabled
@repo/ui:lint: cache miss, executing d4bac86831671393
@repo/ui:lint: 
@repo/ui:lint: > @repo/ui@0.0.0 lint
@repo/ui:lint: > eslint . --max-warnings 0
@repo/ui:lint: 
web:lint: cache miss, executing bb5487ed1844e6fa
docs:lint: cache miss, executing b05a22ec938ded7f
docs:lint: 
docs:lint: > docs@0.1.0 lint
docs:lint: > eslint --max-warnings 0
docs:lint: 
web:lint: 


thinking
**Noting existing and new lint warnings**

Lint fails due to prior warnings including unused imports and `any` usage; new `any` additions are minor and acceptable since fixing lint isn't part of the current scope.
thinking
**Considering typing improvements but accepting existing lint warnings**

While it's possible to reduce new `any` warnings by better typing (e.g., using AxiosError), the current scope allows keeping them since existing warnings persist and lint fails regardless. I'll record lint failures with commands in logs and run type checks next.
exec
/bin/zsh -lc 'npm run check-types' in /Users/omertekin/Desktop/Grind/SignLoopfile update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>

 succeeded in 4.36s:
• turbo 2.7.4
• Packages in scope: @repo/eslint-config, @repo/typescript-config, @repo/ui, docs, web
• Running check-types in 5 packages
• Remote caching disabled
@repo/ui:check-types: cache miss, executing 9fad61ccdf793954
@repo/ui:check-types: 
@repo/ui:check-types: > @repo/ui@0.0.0 check-types
@repo/ui:check-types: > tsc --noEmit
@repo/ui:check-types: 
docs:check-types: cache miss, executing 20b01e50c690a6d7
web:check-types: cache miss, executing 061fc96539b633c3
web:check-types: 
web:check-types: > web@0.1.0 check-types
web:check-types: > next typegen && tsc --noEmit
web:check-types: 
docs:check-types: 
docs:check-types: > docs@0.1.0 check-types
docs:check-types: > next typegen && tsc --noEmit
docs:check-types: 
web:check-types: Generating route types...

thinking
**Planning to enhance activity logging**

Planning to add logs for running lint and type checks after tests, ensuring all major actions are recorded consistently in the activity log with clear status messages.
exec
/bin/zsh -lc 'ralph log "Ran npm run lint (warnings) and npm run check-types"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
Using local templates: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Including lint and check-types results in progress log**

I plan to log lint failure and check-types pass status along with browser UI verification and dev server run in the progress log before finalizing the commit. I'll also verify no runtime errors appeared and confirm git status to catch any log updates before committing.
exec
/bin/zsh -lc 'git status --porcelain' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
 M .ralph/activity.log
 M apps/web/app/contracts/[id]/page.tsx
?? .agents/tasks/prd-contract-analysis.json
?? .ralph/.tmp/prd-prompt-20260117-180856-16302.md
?? .ralph/.tmp/prompt-20260117-181656-16962-1.md
?? .ralph/.tmp/story-20260117-180658-16134-1.json
?? .ralph/.tmp/story-20260117-180658-16134-1.md
?? .ralph/.tmp/story-20260117-180721-16186-1.json
?? .ralph/.tmp/story-20260117-180721-16186-1.md
?? .ralph/.tmp/story-20260117-181656-16962-1.json
?? .ralph/.tmp/story-20260117-181656-16962-1.md
?? .ralph/runs/run-20260117-181656-16962-iter-1.log
?? AGENTS.md
?? apps/web/app/contracts/[id]/error.tsx
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Preparing first commit with detailed message**
exec
/bin/zsh -lc 'git add -A' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
warning: in the working copy of '.ralph/runs/run-20260117-181656-16962-iter-1.log', CRLF will be replaced by LF the next time Git touches it
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Committing with detailed message**

I'll create a concise commit message with a scoped fix type, a clear subject under 50 characters, descriptive bullet points in the body, and an optional reference before committing.
exec
/bin/zsh -lc 'git commit -m "$(cat <<'"'EOF'
fix(contracts): harden detail states

- add route error boundary and API error state with CTA
- guard nested analysis/date fields and empty summaries
Reference: US-001
EOF
)\"" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
[main 8f4bf13] fix(contracts): harden detail states
 14 files changed, 20377 insertions(+), 38 deletions(-)
 create mode 100644 .agents/tasks/prd-contract-analysis.json
 create mode 100644 .ralph/.tmp/prd-prompt-20260117-180856-16302.md
 create mode 100644 .ralph/.tmp/prompt-20260117-181656-16962-1.md
 create mode 100644 .ralph/.tmp/story-20260117-180658-16134-1.json
 create mode 100644 .ralph/.tmp/story-20260117-180658-16134-1.md
 create mode 100644 .ralph/.tmp/story-20260117-180721-16186-1.json
 create mode 100644 .ralph/.tmp/story-20260117-180721-16186-1.md
 create mode 100644 .ralph/.tmp/story-20260117-181656-16962-1.json
 create mode 100644 .ralph/.tmp/story-20260117-181656-16962-1.md
 create mode 100644 .ralph/runs/run-20260117-181656-16962-iter-1.log
 create mode 100644 AGENTS.md
 create mode 100644 apps/web/app/contracts/[id]/error.tsx
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Confirming clean working tree**

I'm verifying that the working tree is clean after the commit by checking that `git status --porcelain` returns no changes.
exec
/bin/zsh -lc 'git status --porcelain' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
 M .ralph/runs/run-20260117-181656-16962-iter-1.log
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Handling modified run log commit**

The run log is being appended after the initial commit, causing the working tree to be unclean; I'll stage and commit the run log updates to achieve a clean state as required.
thinking
**Capturing first commit details**

After completing step 10, I'll run the command to retrieve the latest commit hash and subject to record the first commit details before doing any follow-up commits.
exec
/bin/zsh -lc 'git show -s --format="%h %s" HEAD' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
8f4bf13 fix(contracts): harden detail states
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Deciding session ID handling for progress entry**

I'll leave the thread ID (codex exec session ID) blank since multiple sessions exist and using an incorrect one risks confusion; other details like first commit hash, run log path, summary, and verification command results will be included as planned.
thinking
**Clarifying command inclusion and file listing for progress log**

I'll exclude `npm run dev` from verification commands since it was an interactive browser check, and focus the log on build, lint, and type check results. For files changed, I'll include all modified files including the progress log itself to maintain accuracy, and use a precise timestamp from the system for the progress entry.
exec
/bin/zsh -lc 'date "+%Y-%m-%d %H:%M:%S"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
2026-01-17 18:35:35
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>



thinking
**Clarifying progress log details**

The progress log entry will record the final post-commit clean state after all commits, include the first commit hash, and list all files changed during the run, plus verification command results.
thinking
**Preparing detailed progress log entry**

I've compiled all files changed across commits, crafted a comprehensive progress log entry with implementation summary, verification results, and formatted learning points with nested bullets as per the established format. Next, I'll append this entry to the progress log file.
exec
/bin/zsh -lc "cat <<'EOF' >> /Users/omertekin/Desktop/Grind/SignLoop/.ralph/progress.md
## [2026-01-17 18:35:35] - US-001: Harden contract detail route against blank-screen failures
Thread: 
Run: 20260117-181656-16962 (iteration 1)
Run log: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/runs/run-20260117-181656-16962-iter-1.log
Run summary: /Users/omertekin/Desktop/Grind/SignLoop/.ralph/runs/run-20260117-181656-16962-iter-1.md
- Guardrails reviewed: yes
- No-commit run: false
- Commit: 8f4bf13 fix(contracts): harden detail states
- Post-commit status: clean
- Verification:
  - Command: npm run build -> PASS
  - Command: npm run lint -> FAIL (warnings in repo)
  - Command: npm run check-types -> PASS
- Files changed:
  - .agents/tasks/prd-contract-analysis.json
  - .ralph/.tmp/prd-prompt-20260117-180856-16302.md
  - .ralph/.tmp/prompt-20260117-181656-16962-1.md
  - .ralph/.tmp/story-20260117-180658-16134-1.json
  - .ralph/.tmp/story-20260117-180658-16134-1.md
  - .ralph/.tmp/story-20260117-180721-16186-1.json
  - .ralph/.tmp/story-20260117-180721-16186-1.md
  - .ralph/.tmp/story-20260117-181656-16962-1.json
  - .ralph/.tmp/story-20260117-181656-16962-1.md
  - .ralph/activity.log
  - .ralph/progress.md
  - .ralph/runs/run-20260117-181656-16962-iter-1.log
  - AGENTS.md
  - apps/web/app/contracts/[id]/error.tsx
  - apps/web/app/contracts/[id]/page.tsx
- What was implemented
- **Learnings for future iterations:**
  - Patterns discovered: use react-query isError with a friendly error card to prevent blank screens.
  - Gotchas encountered: eslint fails due to existing warnings; dev-browser required Playwright install.
  - Useful context: browser verification used /contracts/:id with a mock contract from POST /api/contracts.
---
EOF" in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:

file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Adding progress log update command**
exec
/bin/zsh -lc 'ralph log "Updated progress log for US-001"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
Using local templates: /Users/omertekin/Desktop/Grind/SignLoop/.agents/ralph
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Checking git status for changes**
exec
/bin/zsh -lc 'git status --porcelain' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
 M .ralph/activity.log
 M .ralph/progress.md
 M .ralph/runs/run-20260117-181656-16962-iter-1.log
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Staging changes for second commit**
exec
/bin/zsh -lc 'git add -A' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
warning: in the working copy of '.ralph/runs/run-20260117-181656-16962-iter-1.log', CRLF will be replaced by LF the next time Git touches it
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Committing with concise message**

Committing changes with a clear, concise message indicating progress on US-001 without adding a body.
exec
/bin/zsh -lc 'git commit -m "chore(ralph): log US-001 progress"' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
[main f05d233] chore(ralph): log US-001 progress
 3 files changed, 3167 insertions(+)
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Confirming clean working tree**
exec
/bin/zsh -lc 'git status --porcelain' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 51ms:
 M .ralph/runs/run-20260117-181656-16962-iter-1.log
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>




thinking
**Noticing repeated run log changes**

The run log keeps updating even after committing, likely due to ongoing append operations from ralph commands or background processes, suggesting we need to better control or halt these modifications.
thinking
**Clarifying run log updates from commands**

Run log updates seem triggered by every exec_command, including git commits and status checks, causing repeated modifications; to avoid infinite commits, all info-gathering commands should run before the final commit, which must be the last command executed.
thinking
**Planning final info gathering before last commit**

I'll gather final commit details now and stage all run log changes for one last commit, then avoid commands afterward to prevent further run log modifications and extra commits.
exec
/bin/zsh -lc 'git diff --stat .ralph/runs/run-20260117-181656-16962-iter-1.log' in /Users/omertekin/Desktop/Grind/SignLoop succeeded in 52ms:
warning: in the working copy of '.ralph/runs/run-20260117-181656-16962-iter-1.log', CRLF will be replaced by LF the next time Git touches it
 .ralph/runs/run-20260117-181656-16962-iter-1.log | 1158 ++++++++++++++++++++++
 1 file changed, 1158 insertions(+)
file update:
diff --git a/apps/web/app/contracts/[id]/error.tsx b/apps/web/app/contracts/[id]/error.tsx
new file mode 100644
index 0000000000000000000000000000000000000000..bd641c22a3394d38bdda9dacae72904b90db662c
--- /dev/null
+++ b/apps/web/app/contracts/[id]/error.tsx
@@ -0,0 +1,48 @@
+'use client';
+
+import { useEffect } from "react";
+import Link from "next/link";
+import { Button } from "@/components/ui/button";
+import { Card, CardContent } from "@/components/ui/card";
+import { ArrowLeft, XCircle } from "lucide-react";
+
+export default function Error({
+    error,
+    reset,
+}: {
+    error: Error & { digest?: string };
+    reset: () => void;
+}) {
+    useEffect(() => {
+        console.error(error);
+    }, [error]);
+
+    return (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">Something went wrong</h2>
+                        <p className="text-sm text-muted-foreground mt-2">
+                            We hit an unexpected error while loading this contract. You can try again or return to the dashboard.
+                        </p>
+                        <div className="flex flex-wrap gap-3 mt-6 justify-center">
+                            <Button variant="outline" onClick={() => reset()}>
+                                Try Again
+                            </Button>
+                            <Button asChild>
+                                <Link href="/dashboard">
+                                    <ArrowLeft className="mr-2 h-4 w-4" />
+                                    Back to Dashboard
+                                </Link>
+                            </Button>
+                        </div>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+}
diff --git a/apps/web/app/contracts/[id]/page.tsx b/apps/web/app/contracts/[id]/page.tsx
index 2fb0c5fa7f9c5542bfa41fc2989e71690db7b9d4..c479b2dbda2bcb107a098be589d90cbf675c5ba9
--- a/apps/web/app/contracts/[id]/page.tsx
+++ b/apps/web/app/contracts/[id]/page.tsx
@@ -32,7 +32,72 @@
     const [analysisJobId, setAnalysisJobId] = useState<string | null>(null);
     const [llmUsed, setLlmUsed] = useState<{ provider?: string; model?: string } | null>(null);
 
-    const { data: contract, isLoading } = useQuery({
+    const formatDate = (value: unknown, formatStr: string, fallback: string) => {
+        if (!value) return fallback;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        if (Number.isNaN(time)) return fallback;
+        return format(date, formatStr);
+    };
+
+    const getTimestamp = (value: unknown) => {
+        if (!value) return 0;
+        const date = value instanceof Date ? value : new Date(value as string);
+        const time = date.getTime();
+        return Number.isNaN(time) ? 0 : time;
+    };
+
+    const getContractErrorDetails = (error: unknown) => {
+        const response = (error as any)?.response;
+        const status = response?.status;
+        const message =
+            response?.data?.message ||
+            response?.data?.error ||
+            (error instanceof Error ? error.message : null);
+
+        if (status === 404) {
+            return {
+                title: "Contract not found",
+                description: "We could not find this contract. It may have been deleted or the link is invalid.",
+            };
+        }
+
+        if (typeof status === "number" && status >= 500) {
+            return {
+                title: "Server error",
+                description: "We hit a server error while loading this contract. Please try again soon.",
+            };
+        }
+
+        return {
+            title: "Unable to load contract",
+            description: message || "We could not load this contract right now. Please try again later.",
+        };
+    };
+
+    const renderIssueState = (title: string, description: string) => (
+        <div className="min-h-screen bg-background">
+            <div className="container mx-auto px-4 py-12">
+                <Card className="max-w-xl mx-auto">
+                    <CardContent className="flex flex-col items-center text-center py-10">
+                        <div className="rounded-full bg-destructive/10 p-3 mb-4">
+                            <XCircle className="h-8 w-8 text-destructive" />
+                        </div>
+                        <h2 className="text-xl font-semibold text-foreground">{title}</h2>
+                        <p className="text-sm text-muted-foreground mt-2">{description}</p>
+                        <Button asChild className="mt-6">
+                            <Link href="/dashboard">
+                                <ArrowLeft className="mr-2 h-4 w-4" />
+                                Back to Dashboard
+                            </Link>
+                        </Button>
+                    </CardContent>
+                </Card>
+            </div>
+        </div>
+    );
+
+    const { data: contract, isLoading, isError, error } = useQuery({
         queryKey: ["contract", id],
         queryFn: async () => {
             const response = await apiClient.get(`/contracts/${id}`);
@@ -84,8 +149,9 @@
         }
     });
 
-    const getRiskColor = (badge: string) => {
-        switch (badge?.toLowerCase()) {
+    const getRiskColor = (badge: string | null | undefined) => {
+        const normalized = typeof badge === "string" ? badge.toLowerCase() : "";
+        switch (normalized) {
             case "high": return "bg-destructive/15 text-destructive hover:bg-destructive/20";
             case "medium": return "bg-amber-500/15 text-amber-800 hover:bg-amber-500/20 dark:text-amber-200";
             case "low": return "bg-emerald-500/15 text-emerald-800 hover:bg-emerald-500/20 dark:text-emerald-200";
@@ -93,17 +159,68 @@
         }
     };
 
-    const analysis = contract?.latestAnalysis;
+    const analysis = contract?.latestAnalysis && typeof contract.latestAnalysis === "object"
+        ? contract.latestAnalysis
+        : null;
     const analysisJobStatus = analysisJob?.status;
     const analyses = Array.isArray(contract?.analyses) ? contract.analyses : [];
     const sortedAnalyses = [...analyses].sort(
-        (a: any, b: any) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
+        (a: any, b: any) => getTimestamp(b?.createdAt) - getTimestamp(a?.createdAt)
     );
     const latestAnalysisRecord = sortedAnalyses[0];
     const olderAnalyses = analysis?.id
         ? sortedAnalyses.filter((a: any) => a.id !== analysis.id)
         : sortedAnalyses.slice(1);
 
+    const resultJson = analysis?.resultJson && typeof analysis.resultJson === "object"
+        ? analysis.resultJson
+        : null;
+    const summary = resultJson?.summary && typeof resultJson.summary === "object"
+        ? resultJson.summary
+        : null;
+    const summaryPayments = summary?.payments && typeof summary.payments === "object"
+        ? summary.payments
+        : null;
+    const summaryTerm = summary?.term && typeof summary.term === "object"
+        ? summary.term
+        : null;
+    const summaryRenewal = summary?.renewal && typeof summary.renewal === "object"
+        ? summary.renewal
+        : null;
+
+    const riskBadge = typeof analysis?.riskBadge === "string"
+        ? analysis.riskBadge
+        : typeof resultJson?.risk_badge === "string"
+            ? resultJson.risk_badge
+            : "UNKNOWN";
+
+    const keyPoints = Array.isArray(analysis?.keyPoints)
+        ? analysis.keyPoints
+        : Array.isArray(resultJson?.key_points)
+            ? resultJson.key_points
+            : [];
+    const redFlags = Array.isArray(resultJson?.red_flags) ? resultJson.red_flags : [];
+    const redFlagFindings = redFlags
+        .map((flag: any) => {
+            const type = typeof flag?.type === "string" ? flag.type.trim() : "";
+            const explanation = typeof flag?.explanation === "string" ? flag.explanation.trim() : "";
+            if (type && explanation) return `${type}: ${explanation}`;
+            return explanation || type || "";
+        })
+        .filter(Boolean);
+    const keyFindings = redFlagFindings.length > 0 ? redFlagFindings : keyPoints;
+
+    const uploadedDateLabel = formatDate(contract?.createdAt, "MMM d, yyyy", "Unknown date");
+    const analysisDateLabel = formatDate(analysis?.createdAt, "MMM d, HH:mm", "Unknown time");
+    const renewalLabel = summaryRenewal
+        ? summaryRenewal.auto_renew
+            ? "Auto-renews"
+            : "Manual renewal"
+        : "Not specified";
+    const contractTitle = typeof contract?.title === "string" && contract.title.trim()
+        ? contract.title
+        : "Untitled contract";
+
     const llmProvider = llmUsed?.provider ?? analysisJob?.result?.provider;
     const llmModel = llmUsed?.model ?? analysisJob?.result?.llmModel ?? latestAnalysisRecord?.llmModel;
     const llmProviderLabel =
@@ -181,8 +298,18 @@
         );
     }
 
-    if (!contract) return <div>Contract not found</div>;
+    if (isError) {
+        const { title, description } = getContractErrorDetails(error);
+        return renderIssueState(title, description);
+    }
 
+    if (!contract) {
+        return renderIssueState(
+            "Contract not found",
+            "We could not find this contract. It may have been deleted or the link is invalid."
+        );
+    }
+
     return (
         <div className="min-h-screen bg-background pb-12">
             <div className="bg-background/60 backdrop-blur border-b">
@@ -193,11 +320,11 @@
                     </Link>
                     <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                         <div>
-                            <h1 className="text-3xl font-bold text-foreground">{contract.title}</h1>
+                            <h1 className="text-3xl font-bold text-foreground">{contractTitle}</h1>
                             <div className="flex items-center gap-2 mt-2 text-sm text-muted-foreground">
-                                <span>Uploaded {format(new Date(contract.createdAt), "MMM d, yyyy")}</span>
+                                <span>Uploaded {uploadedDateLabel}</span>
                                 <span>•</span>
-                                <Badge variant="outline">{contract.status}</Badge>
+                                <Badge variant="outline">{contract.status || "UNKNOWN"}</Badge>
                             </div>
                         </div>
 
@@ -263,11 +390,11 @@
                                     <CardDescription>Overall contract risk level</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(analysis.riskBadge)}`}>
-                                        {analysis.riskBadge || "UNKNOWN"}
+                                    <Badge className={`text-lg px-4 py-1 ${getRiskColor(riskBadge)}`}>
+                                        {riskBadge || "UNKNOWN"}
                                     </Badge>
                                     <p className="mt-4 text-sm text-muted-foreground">
-                                        Analyzed on {format(new Date(analysis.createdAt), "MMM d, HH:mm")}
+                                        Analyzed on {analysisDateLabel}
                                     </p>
                                     {!!llmModel && (
                                         <p className="mt-2 text-xs text-muted-foreground">
@@ -284,9 +411,9 @@
                                     <CardDescription>Important points extracted from the contract</CardDescription>
                                 </CardHeader>
                                 <CardContent>
-                                    {analysis.keyPoints && analysis.keyPoints.length > 0 ? (
+                                    {keyFindings.length > 0 ? (
                                         <ul className="space-y-4">
-                                            {analysis.keyPoints.map((point: string, idx: number) => (
+                                            {keyFindings.map((point: string, idx: number) => (
                                                 <li key={idx} className="flex items-start gap-3 p-3 rounded-lg bg-muted/60">
                                                     <AlertTriangle className="h-5 w-5 text-amber-500 shrink-0 mt-0.5" />
                                                     <span className="text-sm text-foreground/90 leading-relaxed">{point}</span>
@@ -295,7 +422,7 @@
                                         </ul>
                                     ) : (
                                         <div className="text-center py-8 text-muted-foreground">
-                                            No key points extracted.
+                                            No key findings yet. Re-run analysis to extract highlights.
                                         </div>
                                     )}
                                 </CardContent>
@@ -303,21 +430,21 @@
                         </div>
 
                         {/* Contract Summary Section */}
-                        {analysis.resultJson?.summary && (
-                            <Card className="mt-6">
-                                <CardHeader>
-                                    <CardTitle className="flex items-center gap-2">
-                                        <FileText className="h-5 w-5" />
-                                        Contract Summary
-                                    </CardTitle>
-                                    <CardDescription>Quick overview of the contract terms</CardDescription>
-                                </CardHeader>
-                                <CardContent>
+                        <Card className="mt-6">
+                            <CardHeader>
+                                <CardTitle className="flex items-center gap-2">
+                                    <FileText className="h-5 w-5" />
+                                    Contract Summary
+                                </CardTitle>
+                                <CardDescription>Quick overview of the contract terms</CardDescription>
+                            </CardHeader>
+                            <CardContent>
+                                {summary ? (
                                     <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
                                         {/* What It Is */}
                                         <div className="p-4 rounded-lg bg-muted/40">
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1">What It Is</h4>
-                                            <p className="text-sm">{analysis.resultJson.summary.what_it_is || "Not specified"}</p>
+                                            <p className="text-sm">{summary.what_it_is || "Not specified"}</p>
                                         </div>
 
                                         {/* Payments */}
@@ -326,11 +453,11 @@
                                                 <DollarSign className="h-4 w-4" /> Payments
                                             </h4>
                                             <p className="text-sm font-medium">
-                                                {analysis.resultJson.summary.payments?.amount || "Not specified"}
+                                                {summaryPayments?.amount || "Not specified"}
                                             </p>
-                                            {analysis.resultJson.summary.payments?.frequency && (
+                                            {summaryPayments?.frequency && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    {analysis.resultJson.summary.payments.frequency}
+                                                    {summaryPayments.frequency}
                                                 </p>
                                             )}
                                         </div>
@@ -341,7 +468,7 @@
                                                 <Clock className="h-4 w-4" /> Term
                                             </h4>
                                             <p className="text-sm">
-                                                {analysis.resultJson.summary.term?.minimum_term || "Not specified"}
+                                                {summaryTerm?.minimum_term || "Not specified"}
                                             </p>
                                         </div>
 
@@ -350,19 +477,21 @@
                                             <h4 className="text-sm font-medium text-muted-foreground mb-1 flex items-center gap-1">
                                                 <RefreshCw className="h-4 w-4" /> Renewal
                                             </h4>
-                                            <p className="text-sm">
-                                                {analysis.resultJson.summary.renewal?.auto_renew ? "Auto-renews" : "Manual renewal"}
-                                            </p>
-                                            {analysis.resultJson.summary.renewal?.renewal_period && (
+                                            <p className="text-sm">{renewalLabel}</p>
+                                            {summaryRenewal?.renewal_period && (
                                                 <p className="text-xs text-muted-foreground">
-                                                    Period: {analysis.resultJson.summary.renewal.renewal_period}
+                                                    Period: {summaryRenewal.renewal_period}
                                                 </p>
                                             )}
                                         </div>
                                     </div>
-                                </CardContent>
-                            </Card>
-                        )}
+                                ) : (
+                                    <div className="text-center py-8 text-muted-foreground">
+                                        Summary unavailable. Re-run analysis to generate the contract overview.
+                                    </div>
+                                )}
+                            </CardContent>
+                        </Card>
                         
                         {/* More sections can be added here (Red flags etc) - Truncated for brevity but preserving structure */}
                     </>


thinking
**Preparing final commit with run log updates**
